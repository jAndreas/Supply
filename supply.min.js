window.supply=function(m,n,z){var t="/exec/supply.pl",k=null,q=null,u=0,p={},o={},d={},i={},A=navigator.userAgent.toLowerCase(),r=Object.prototype.toString,v=n.documentElement,w="scr"+ +new Date,x=null,s=n.createElement("script"),B=["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML3.XMLHTTP","MSXML2.XMLHTTP.6.0"],g={loadjavascript:1,loadstylesheet:2,jsonavailable:4,callback:8,useeval:16,msie:32,compatibleIE:64,debug:128,removescripts:256,localStorage:512,loadimages:1024},f=0;d.reset=function(){u=q=
null;cacheDelay=1500;f=0;k&&k.abort();f|=g.useeval;f|=/msie/.test(A)?g.msie:0;if(f&g.msie&&A.match(/msie\D+(\d+(\.\d+)?)/))if(parseFloat(RegExp.$1)>=8&&"XDomainRequest"in m)f|=g.compatibleIE;var a=f,b;a:{if("localStorage"in m)try{localStorage.setItem("supply","test");if(localStorage.getItem("supply")==="test"){localStorage.removeItem("supply");b=g.localStorage;break a}}catch(c){}b=0}f=a|b;if("complete"in i)i.complete=[]};d.init=function(){d.reset();k=function(){var a;try{a=f&g.compatibleIE?new XDomainRequest:
new XMLHttpRequest}catch(b){for(var c=B.length;c--;)try{a=new ActiveXObject(B[c]);break}catch(e){}}finally{return a}}();if(!k)throw Error("Unable to create XMLHttpRequest");x=function(){var a=null;s.type="text/javascript";s.textContent="window."+w+"=1;";v.insertBefore(s,v.firstChild);if(m[w]===1){a="textContent";delete m[w]}else a="text";v.removeChild(s);return a}();if(f&g.localStorage)p=JSON.parse(localStorage.getItem("supplyJS"))||{}}();o.setDealer=function(a){if(typeof a==="string")t=a;return o};
o.files=function(a){var b=a.javascript,c=a.stylesheet,e=a.images,h=a.callback;a=a.debug;var j=[],l="";d.reset();if(b&&r.call(b)==="[object Array]")f|=g.loadjavascript;if(c&&r.call(c)==="[object Array]")f|=g.loadstylesheet;if(e&&r.call(e)==="[object Array]")f|=g.loadimages;if(a&&a===true)f|=g.debug;if(h&&(typeof h==="function"||typeof h==="string"))f|=g.callback;f&g.loadstylesheet&&j.push(d.serialize(c,"css"));f&g.loadjavascript&&j.push(d.serialize(b,"js"));f&g.loadimages&&j.push(d.serialize(e,"images"));
if(f&g.callback)if(typeof h==="function")o.listen("complete",h);else typeof h==="string"&&h in m&&o.listen("complete",m[h]);if(a)d.attachScript(b);else{l=t+"?"+j.join("&");if(f&g.compatibleIE){k.onprogress=function(){d.readyStateHandler(true)};k.onload=function(){d.readyStateHandler(true,true)}}else k.onreadystatechange=function(){d.readyStateHandler(false)};if(l.length<2048){k.open("GET",l,true);k.send(null)}else{k.open("POST",t,true);k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
k.send(j.join("&"))}}};d.readyStateHandler=function(a,b){if(!(f&g.msie)||f&g.compatibleIE)if(a&&q===null||k.readyState===3&&q===null)q=m.setInterval(function(){d.getLatestPacket()},25);if(k.readyState===4||b){clearInterval(q);d.getLatestPacket();f&g.localStorage&&localStorage.setItem("supplyJS",JSON.stringify(p));if(i.complete&&i.complete.length)for(var c=0,e=i.complete.length;c<e;c++)i.complete[c].apply(m)}};d.getLatestPacket=function(){var a=k.responseText.length,b=k.responseText.substring(u,a);
d.processPacket(b);u=a};d.processPacket=function(a){if(!(a.length<1)){var b=a.indexOf("\u0003"),c=-1;if(b>-1)if(d.currentStream){c=b;b=-1}else c=a.indexOf("\u0003",b+1);if(d.currentStream)if(c>-1){b=a.substring(0,c);d.currentStream+=b;a=a.slice(c);d.processPayload();d.processPacket(a)}else d.currentStream+=a;else{d.currentStream="";if(b>-1)if(c>-1){b=a.substring(b,c);d.currentStream+=b;a=a.slice(c);d.processPayload();d.processPacket(a)}else d.currentStream+=a.substr(b)}}};d.processPayload=function(){d.currentStream=
d.currentStream.replace("\u0003","");var a=d.currentStream.split("\u0001"),b=a[0],c=a[1],e=a[2];a=a[3];if(typeof i[b]!=="undefined")for(var h=0,j=i[b].length;h<j;h++)i[b][h].call(d,a,c,e);delete d.currentStream};d.attachScript=function(a){var b=n.createElement("script"),c=n.getElementsByTagName("head")[0],e=r.call(a)==="[object Array]",h=e?a.shift():a;if(h){b.src="/js/"+h;b.type="text/javascript";b.onload=b.onreadystatechange=function(){if(b.readyState){if(b.readyState==="complete"||b.readyState===
"loaded"){b.onreadystatechange=null;e&&d.attachScript(a)}}else{"console"in m&&console.log(b.src," attached");e&&d.attachScript(a)}};c.insertBefore(b,c.firstChild)}else if(i.complete&&i.complete.length){c=0;for(h=i.complete.length;c<h;c++)i.complete[c].apply(m)}};d.serialize=function(a,b){var c=[],e=a.length,h,j,l;if(r.call(a)==="[object Array]"&&typeof b==="string"){if(f&g.localStorage)for(l=0;l<e;l++){j=a[l]in p?JSON.parse(p[a[l]]):"0";c.push([b,"=",a[l],"~",j.modified].join(""));if(j&&j.mime===
"text/css")if(typeof i[j.mime]!=="undefined"){var y=0;for(h=i[j.mime].length;y<h;y++)i[j.mime][y].call(d,j.src,j.filename,null)}}else for(l=0;l<e;l++)c.push([b,"=",a[l]].join(""));return c.length?c.join("&"):z}return z};d.removeDuplicateNode=function(a,b){for(var c=n.getElementsByTagName("style"),e=c.length;e--;)c[e].getAttribute("name")===b&&a.removeChild(c[e])};o.listen=function(a,b){if(typeof i[a]==="undefined")i[a]=[];typeof b==="function"&&i[a].push(b)};(function(){o.listen("text/javascript",
function(a,b,c){if(f&g.localStorage)if(a==="cached")a=JSON.parse(p[b]).src;else p[b]=JSON.stringify({modified:c,src:a,mime:"text/javascript",filename:b});try{if(f&g.useeval)eval(a);else{var e=n.getElementsByTagName("head")[0]||n.documentElement,h=n.createElement("script");h.type="text/javascript";h[x]=a;h.setAttribute("name",b);e.insertBefore(h,e.firstChild);f&g.removescripts&&e.removeChild(h)}}catch(j){"console"in m&&console.error(b,": Exception. Details -> ",j)}});o.listen("text/css",function(a,
b,c){if(f&g.localStorage&&b&&c)if(a==="cached")a=JSON.parse(p[b]).src;else p[b]=JSON.stringify({modified:c,src:a,mime:"text/css",filename:b});c=n.getElementsByTagName("head")[0]||n.documentElement;var e=n.createElement("style");e.type="text/css";e[x]=a;e.setAttribute("name",b);d.removeDuplicateNode(c,b);c.insertBefore(e,c.firstChild);f&g.removescripts&&c.removeChild(e)})})();return o}(window,window.document);
